    .text
    .globl exploit
    .ent exploit
    .set noreorder
    .set noat

    # syscall 번호 정의 (ABI에 맞게 수정)
    .equ SYS_exit2, 4001    # 예: Linux MIPS o32에서 exit=4001

exploit:
    # Compare x ($a0) with 0x42
    li    $t0, 0x42        # $t0 = 0x42
    beq   $a0, $t0, L_equal
    nop                    # branch delay slot

    # x != 0x42 case: exit2(0)
    li    $a0, 0           # $a0 = 0
    li    $v0, SYS_exit2   # syscall number
    syscall
    # (syscall하면 프로세스 종료하므로, 아래 코드는 도달하지 않음)

L_equal:
    # x == 0x42 case: exit2(x + 32)
    addiu $a0, $a0, 32     # $a0 = x + 32
    li    $v0, SYS_exit2
    syscall

    .end exploit
